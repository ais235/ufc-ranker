# –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö UFC Ranker

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏

```
database_backups/
‚îú‚îÄ‚îÄ README.md                           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ backup_database.py                  # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤
‚îú‚îÄ‚îÄ restore_database.py                 # –°–∫—Ä–∏–ø—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ DATABASE_OPERATION_GUIDE.md    # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ schema/
    ‚îú‚îÄ‚îÄ database_schema.sql            # –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
    ‚îî‚îÄ‚îÄ current_database_schema.sql    # –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç models.py)
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:
```bash
python database_backups/backup_database.py
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–ø–∏–π:
```bash
python database_backups/backup_database.py list
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∫–æ–ø–∏–∏:
```bash
python database_backups/backup_database.py restore ufc_ranker_v2_backup_YYYYMMDD_HHMMSS.db
```

### –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –ë–î:
```bash
python database_backups/restore_database.py
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `backup` | –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é |
| `list` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–ø–∏–π |
| `restore <filename>` | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∫–æ–ø–∏–∏ |

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø (cron):
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
0 2 * * * cd /path/to/ufc-ranker && python database_backups/backup_database.py
```

### –ë—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:
```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
python database_backups/backup_database.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä—ã
python parsers/main.py

# –°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
python database_backups/backup_database.py
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è–π—Ç–µ —Ñ–∞–π–ª—ã .db –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏**
2. **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö**
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**
4. **–•—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –≤ –ø–∞–ø–∫–µ database_backups/**
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –∫–æ–ø–∏–∏ (–æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)**

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ë–î:
```bash
ls -lh ufc_ranker_v2.db
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π:
```bash
sqlite3 ufc_ranker_v2.db "SELECT COUNT(*) FROM fighters;"
sqlite3 ufc_ranker_v2.db "SELECT COUNT(*) FROM fights;"
sqlite3 ufc_ranker_v2.db "SELECT COUNT(*) FROM events;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:
```bash
sqlite3 ufc_ranker_v2.db "PRAGMA integrity_check;"
```

## üÜò –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è

### –ï—Å–ª–∏ –ë–î –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞:
1. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–∞–±–æ—á—É—é –∫–æ–ø–∏—é: `python database_backups/backup_database.py list`
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `python database_backups/backup_database.py restore <filename>`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å: `sqlite3 ufc_ranker_v2.db "PRAGMA integrity_check;"`

### –ï—Å–ª–∏ –ë–î –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Ç–µ—Ä—è–Ω–∞:
1. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ: `python database_backups/restore_database.py`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
3. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é: `python database_backups/backup_database.py`

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–†–∞–∑–º–µ—Ä –ë–î**: –æ–±—ã—á–Ω–æ 10-50 MB
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ fighters**: ~1000+
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ fights**: ~5000+
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ events**: ~500+
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π**: –¥–æ 5 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞)

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `ufc_ranker_v2.db` - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `database/models.py` - SQLAlchemy –º–æ–¥–µ–ª–∏
- `database_backups/schema/current_database_schema.sql` - –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞
- `FIGHTS_TABLE_COLUMNS_DESCRIPTION.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã fights
